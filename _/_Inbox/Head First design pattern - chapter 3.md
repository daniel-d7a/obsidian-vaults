- ف الشابتر ده هنتكلم عن ال decorator pattern و ده pattern بيسمحلك انك تزود او تغير ف ال classes الي انت او غيرك كاتبها من غير inheritance و من غير ما تعدل ف الكود 
- و هناخد عليه مثال ب كافية عاوزين نعمل للكافية ده سيستم طلبات الكتروني 
- هما بالفعل عندهم نظام طلبات و ده شكله
- عندنا فكرة المشروب هي اساس كل شئ تاني
- بعد كده باخد منها عشان نعمل classes لانواع المشروبات التانية وي القهوة ال decaf او الاسبرسو او غيرهم لان كل مشروب له سعر مختلف
- بعد كده عاوزين نضيف الاضافات بتاعة القهوة زي الكريمة و الحليب او الكراميل او غيرهم وخد بالك ان كل اضافة بتزود مبلغ مختلف على سعر المشروب
- ف هنا انت ممكن تفكر ان عشان تمثل ده محتاج كلاس لكل شكل من اشكال المشروبات زي مثلا اسبرسو و بالكريمة و اسبرسو بالكريمة و اللبن و اسبرسو بالكراميل و اسبرسو باللبن و الكراميل و غيره و غيره

- طيب ده باين عليه انه حل وحش طب ممكن نعمل ايه احسن من كده ؟
- ممكن نحط الاضافات كلها ف base class و هو يقدر يحسب سعرها و نعمل منه sub classes للمشروبات و كل مشروب بيحسب سعره + سعر الاضافات الي موجود في ال base class
- ده حل احسن من الي فات و هيقلل ال classes جدا بس هيجيب مشاكل مختلفة
- اولا لو زودنا اضافة جديدة ف السيستم هحتاج اخش عال class ده و اغير فيه و دي مشكلة كبيرة
- و شوية مشاكل صغيرة زي ان كمان مش كل المشروبات ينفعلها كل الاضافات زي مثلا مش منطقي اني احط كراميل على الشاي
- كمان المثال بتاعنا مش بيعمل حسابه لو حطينا الاضافة اكتر من مرة

- التعديل على كود جاهز مشكلة لانك ممكن تغير او تبوظ حاجة كانت شغالة بالفعل و حل المشكلة دي هو design principle جديد
- بيقولك ان ال class لازم يكون مفتوح للاضافة لكن مغلق في وجه التعديل
- بمعنى ان انا اقدر ازود حجات جديدة لكن مقدرش اعدل ف حاجة موجودة مسبقا 
- ده بيساعدك تزود features جديدة من غير ما تخرب حاجة موجودة و شغالة
- حاجة زي كده نقدر نعملها عن طريق ال composition زي ما عملنا ف ال observer pattern عشان نعمل كود flexible و حتى ممكن يتغير at run time
- بدل ما نستخدم ال inheritance الي بيثبت المعلومات و الكود 
- و من خلال ال design patterns هنشوف اكتر من طريقة تخلي الكود بتاعنا ثابت لكن ممكن اضيف عليه 
- خلي بالك كمان ان ده مش شرط على جميع ال classes بالعكس كون انك تطبقه على كل حاجة هيخلي الكود بتاعك صعب الفهم و التعامل معه
- مع الخبرة و الممارسة هتقدر تعرف ايه الاجزاء الي هيفيدك فيها تصميم مفتوح للتعديل و مغلق للاضافة

- نقدر نطبق ال open closed principle عن طريق ال decorator pattern 
- و ده pattern بيسمحلي اني ابني ال objects بتاعتي بشكل طبقات 
- اول طبقة بتكون الاساس و الباقي مش شنط و اكياس لا الباقي بيكون decorators
- ال decorators دي بتكون بنفس شكل الاساس بس بتغير ف طريقة شغله
- زي مثلا اني اعمل مشروب و احط عليه اضافات تغير من طعمه او من سعره
- بس في شرط ان الطبقات دي تكون كلها من نفس ال type 
- و ده بيسمحلي اني اتعمل معاهم كلهم بنفس الشكل
- و بما ان ده مش inheritance ف انا اقدر اضيف اي عدد من الطبقات و كمان اعمله خلال ال run time
- و ده تعريفه الرسمي

- لو عاوزين نعمل حاجة زي كده ف الكود هنحتاج interface تكون الاساس للاساس و لل decorators و دي الي هنعمل منها ال objects العادية بتاعتنا 
- ال decorator بيكون object عادي بيستخدم ال interface الاضافة الوحيدة هي انه بيشيل object كمان جواه و ده هو الحاجة الي هو بيعملها decorate او بيكون طبقة جديدة حواليها
- و كمان بنعمل class يكون الاساس لل decorators 
- ال decorator بتقدر توصل لل object الاصلي و ف نفس الوقت هي من نفس شكله و عندها methods زي بالظبط 
- ف لو انا مش عاوز اغير ال object ممكن انادي ال method في ال method عادي او لو عاوز اغيرها ممكن اخد نتيجة ال method الاصلية و اعمل بيها اي تغيير
- و كون ال decorator هو من نفس نوع ال objects بتاعتي ده بيخليني اقدر استخدمه مكانه من غير اي تغيير ف الكود 
- بعد ما فهمنا فكرته تعالى نطبق ال pattern على المثال بتاعنا

- حاجة ناخد بالنا هنا هي ان ال decorator بسيط جدا و الغرض منه عمل التعديلات بس مازال له عيوب
- زي انه ميقدرش يعرف اي حاجة عن ال decorators التانية ولا يقدر يعرف ترتيبهم حتى و ميقدرش يتعامل مع وجود class معين او decorator معين مستخدم
- هو بيتعامل مع فكرة ان ال decorators كلها نفس الشكل بس بتضيف بيانات مختلفة
- كمان من عيوبه المذكورة في الكتاب انه بيخلي عندك كمية كبيرة من ال classes الصغيرة و ده ممكن يلخبط الناس الي شغاله عالكود 
- و بالنسبة للشكل الغريب و الكود الكتير الي هتشوفه عشان تعمل مشروب واحد ف متقلقش
- غالبا مبنستعملش الكود ده كده
- غالبا بنستخدم patters تانية زي ال builder او ال factory عشان نسهل و نخفي تفاصيل انشاء ال objects بتاعتنا

- لو عاوزين مثال من الحياة الواقعية على ال builder pattern ف هو ال IO في java
- من ناحية انك تقدر تبني طريقة تعاملك من الملفات من خلال اكتر من decorator 
- هتشوف ان java فيها اكتر من input stream و دول اقدر اعملهم decorate ب حجات زي buffers عشان احسن ال performance او zip عشان اقدر اقرا zip file 
- و الموضوع بسيط لدرجة انك ممكن تعمل ال stream decorator بتاعك 