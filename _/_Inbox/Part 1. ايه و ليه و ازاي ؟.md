[[Eraasoft]]

#project/react

## - ايه هي react ؟

- ريأكت هي اطار عمل للويب مبني ب javascript من قبل شركة facebook او meta في ٢٠١٣ و تستخدم لبناء المواقع بشكل اساسي (لكن لها استخدامات اخرى) و تحديدا ال SPA او ال single page application
- من مميزات react 
    - استخدام ال components الي هي وحدات صغيرة قابلة لاعادة الاستخدام من ال html و ال css و ال JavaScript لبناء الواجهات
    - اسلوبها declarative الي هو عكس ال imperative يعني مش محتاج اقولها كل خطوة تعملها ازاي كفاية اني اقولها ايه الي انا عاوزه يتم و هي بتتصرف
    - الداتا بتتحرك ف اتجاه واحد من ال parent لل child و ده بيخليها اسهل ف الفهم 
    - بتستخدم ال virtual dom و ده بيسرع الاداء مقارنة باستخدام ال dom العادي
## - ليه نستخدم react ؟
زي اي حاجة ف الدنيا احنا بنستخدم ريأكت عشان بتدينا مميزات و بتحل مشاكل  
- اولا عشان فكرة ال components بتسمح اننا نعيد استخدام اجزاء من الواجهة ف اكتر من مكان من غير نسخ و لصق و لما اعدل فيه بيتعدل ف كل مكان انا بستخدمه و ده كمان بيسهل ال debug و ال testing لان كل حتة من الابلكيشن لوحدها بكل ما تحتاج
- بتديك ادوات كتير ف وقت التطوير زي ال jsx و ال hot module reloading و كمان بتشتغل declarative و ده اسهل بكتير من ال imperative
- بتسهل ربط ال ui بال state الموجودة عندي ف الكود عن طريق انها بتخلي ال state هي الي تحرك ال ui مش العكس ف لما ال state تتغير ال ui تلقائي بيتغير 
- منتشرة في سوق العمل ف لو اتعلمتها و استخدمتها هتلاقي شغل بسهولة
- من الفريموركس القديمة ف ليها جمهور واسع و مكتبات كتير بتحل كل شئ و اي شئ
- ال vdom اسرع بكتير من ال dom العادي (هنتكلم عنه اكتر قدام) و ده بيخلي الموقع و التعامل معاه اسرع 
- بتقدم مكتبات كتير بتحل مشاكل كتير زي ال data fetching و ال forms و ال animation و ال global state management و غيرهم كتير في حزمة صغيرة من غير ما توجع دماغك بالتفاصيل

هل ده معناه ان react ملهاش عيوب لا طبعا لكن هي ليها دور و هي بتأديه كويس جدا جدا لكنها مش الحل لكل شئ

هل ده برضو معناه اننا نبطل نستخدم ال html css js العادي و نكتب كل حاجة react لا برضو و ده بيكون على حسب كل مشروع

## - يعني ايه SPA ؟

قلنا ان ريأكت بتعمل spa طب يعني ايه spa

دي اختصار ل single page application و ده ويب ابلكيشن او موقع بيكون فيه صفحة html واحدة بس و كل المحتوى الي فيها و التنقل ما بين الصفحات بيتم عن طريق ال JavaScript من خلال ريأكت و من غير ما البراوزر يعمل ريفريش

ف العادي انت اول مرة تزور الموقع و كل ما تروح لصفحة جديدة بتبعت ريكويست للسيرفر ف يرد عليك ب صفحة html جاهزة فيها محتوى و لو في صفحات css او js او صور تبعها بيبعتهم معاها

ف ريأكت انت اول مرة تزور الموقع بتبعت ريكويست ف السيرفر يرد عليك ب صفحة html فاضية تقريبا و شوية js كتير كده دي الي هي كود ريأكت الي بيبدأ يبني المحتوى الي في الصفحة

بعد كده اي زيارة لاي صفحة جديدة مش بتروح للسيرفر لا ريأكت بتمسكها قبل ما تطلع من البراوزر و تشوف انت عاوز انهي صفحة و تشيل الصفحة الموجودة و تحط الصفحة الجديدة باستخدام ال JavaScript (طبعا محتاجين client side router عشان ده يتم) 

و كل حاجة بتتم عن طريق ال JavaScript حتى تغيير ال url و اي بيانات محتاجينها من السيرفر بنبعتلها fetch او ajax call من ال JavaScript 

الفكرة الي قدامك دي بتخلي جزء كبير من تجربة الموقع موجود على ال client او يعني عالبراوزر بتاعك مش عالسيرفر السيرفر بس بيبعت اول مرة الحاجة و بعد كده بيبعت بيانات لو احتجناها

ف ده ميزته انه اسرع بكتير من العادي في حتة النقل ما بين الصفحات او التعامل مع الويبسايت عامة عشان مفيش رايح جاي عالسيرفر كل شوية لما اعوز اغير داتا او انقل لصفحة تانية

بس له شوية عيوب مقارنة بالطريقة التقليدية زي مثلا اني لازم ابعت ال html الفاضي و ال js و استنى ال js تستغل عشان الموقع يظهر و لو ال js كانت كتير ف هضطر استنى اكتر ف هتلاقي انه ف الاغلب او load للموقع بياخد شوية وقت بس بعد كده الدنيا بتبقى اسرع على عكس الطريقة التقليدية الي بتبعتلي فايل html جاهز و البراوزر بيعرضه و خلاص

كمان مشكلة هي ان السيرفر بيبعتلي فايل فاضي ف ده بيخلي نتايج ال seo وحشة عشان ال bots بتاعة ال seo الي بتشوف المواقع و تعرف كل موقع بيتكلم عن ايه عشان تربطه ب نتايج البحث الصح متقدرش تشغل ال js الي جاي من السيرفر هي بس بتبص عال html و بما انه فاضي ف مبتلاقيش حاجة تعملها على عكس لما السيرفر يبعتلي فايل كامل متكامل ببياناته ال bots تقدر تشوف البيانات دي و تدي تقييم لمحتوى الموقع

النقطتين دول ممكن يكونو مشاكل بالنسبالك او لا على حسب الابلكيشن بتاعك و خد ف الاعتبار برضو الميزات الي انت بتاخدها قصادهم

ف مثلا لو انت بتعمل ابلكيشن زي canva او trello او gmail مثلا ف مش مشكلة لو وقت البداية بطئ طالما بقية الوقت الابلكيشن هيبقى سريع خصوصا انه فيه تعامل كتير مع المستخدم

او لو انت مثلا بتعمل dashboard ف دي مش هتحتاج seo كويس

طبعا ده مش ل react بس في عندنا spa frameworks كتير زي vue angular svelte solid و غيرهم كتير

## ال SPA و ال SSR و ال SSG.

من شويه ذكرنا ال spa وده بكل بساطه نوع من انواع المواقع اللي بتشتغل عن طريق انها بتبعت صفحه واحده بس للبراوزر والجافا سكريبت بتكمل تعمل كل حاجه وكمان شفنا مميزات وعيوبه وشوفنا ان في عيبين قاتلين ممكن يأثرو معاك جامد على حسب نوع الابلكيشن اللي انت بتعمله

بس مع ظهور تقنيات جديده في عالم الويب في ناس قالت طب ما احنا ممكن نعمل انواع جديده من الابلكيشنز الابلكيشنز دي برده تحل المشاكل اللي موجوده في الspa او تكون مخصصه لانواع تانيه من الاستخدامات

فاهم مع الوقت ظهرت لنا التقنيات اللي هنتكلم عنها دلوقتي اللي هم ال ssr وال ssg وهنقارن ما بينهم وما بين الاس بي اي وما بين ان احنا نستعمل عادي html css js

### ssr

ال ssr اختصار ل server side rendering و ده من اسمه كده السيرفر بيعمل ريندر للصفحة و يبعتهالك جاهزة

هتقولي طب ما ده شبه الي احنا كنا بنعمله قبل كده بحاجة زي php مثلا هقولك هو ده فعلا برضو ssr بس مبنقولش عليه كده الي احنا بنقول عليه ssr فيه ميزة هو انه بعد ما السيرفر يرندر الصفحو و يبعتها الصفحة بتكمل بقية حياتها spa يعني لما تنقل من صفحة للتانية مش هتلاقي loading او refresh ف البراوزر و ال js الي في البراوزر هي الي بتتحكم فيها بشكل كامل

و ده بيحصل عن طريق ان الصفحه لما تتبعت من السيرفر بيبقى فيها تعليمات خاصة و بيتبعت معاها ال js بتاعتها (اذا مكانتش اتبعتت قبل كده ) و لما توصل البراوزر بيعرضها ك صفحة html عادية و ف الخلفية بيستخدم التعليمات الي جاية معاها عشان يوفق ما بين ال html الي جايله و ال js الي عنده عشان الصفحة تقدر تكمل كانها spa و دي عمليه اسمها ال hydration

عاوزك تاخد بالك اني لما بقولك ترندر الصفحة على السيرفر دي معناها ان في كود رياكت مكتوب و ده ف العادي على البراوزر بيتحول ل js بيستخدمها البراوزر عشان يعمل ال html 

نفس الكلام ده بنحاول نعمله على السيرفر الي هو مختلف بشكل كبير عن البراوزر، بنحاول نشغل نسخة من react على السيرفر عشان تطلعلنا ال html الي هيتبعت للبراوزر

ده بيديك مميزات ال spa من السرعة و السلاسة ف الاستخدام و التنقل ما بين الصفحات و كمان مميزات السيرفر زي ال seo الكويس و سرعة التحميل اول مرة و كمان ميزة ان معظم الشغل الي ف الصفحة بيتم على السيرفر الي هو جهاز بتاعنا انا عارف قدراته و إمكانياته مش معتمد على امكانيات جهاز المستخدم 

طبعا مش دي بس مزايا ال ssr لا ده كمان زودلك مزايا كتير بما انك عندك سيرفر زي انك تقدر تعمل ال data fetching بتاعك و الريكويستات كلها عالسيرفر و حتى تكلم الداتابيز بشكل مباشر بدل ما تستنى loading ف البراوزر لا الصفحة بتجيلك جاهزة بالداتا كلها

(كمان قدملك ميزة ال server routing لان زي ما شفنا ال spa بتعمل routing وهمي على البراوزر بس و بيحتاج تظبيط عشان يشتغل لما ترفع المشروع بس بما انك معاك دلوقتي سيرفر تقدر تخلي ال routing بيتم ف الناحيتين) (ميزة مش مهم قوي ذكرها)

بس طبعا مفيش حاجة كاملة و من عيوب ال ssr انه ك architecture و ك استخدام معقد اكتر بكتير من ال spa لان مش كل حاجة بتشتغل على السيرفر و على الكلاينت و معقد ف حكاية انك متبعتش حاجة مينفعش تطلع من السيرفر للكلاينت (زي مثلا ال api key او ال db credentials ) و معقد ف انك تعمله caching لان في حين ان الكلاينت الواحد بيشتغل لمستخدم واحد السيرفر الواحد بيم اكتر من مستخدم ف ده ممكن لو مخدتش بالك تسرب بيانات من مستخدم للتاني

ده غير انه بيحتاج منك سيرفر (حاجة حمادة هلال جدا سيرفر ريندر بيحتاج سيرفر تخيل ؟) على عكس الطرق التقليدية و ال spa ممكن تشغلهم من على اي static file hosting service و الي غالبا بتكون ببلاش

و عيب اخر هو ان فكرة ال hydration بتاخد وقت ف بيبقى في فترة من عدم الاستجابة ما بين ان الموقع بيعرض ال html و ان الموقع بيشغل ال js بتاعه الصفحة ف ده ممكن يخلي المستخدم يحس ان الموقع مهنج او معلق

(المشكلة دي حلها هو اننا نستخدم ال js ك اضافة للموقع مش هي تبقى الموقع و نرجع لل web fundamentals)

### ازاي تعمل موقع ssr 

تقدر تعمل كل حاجة بايدك و تظبط رياكت مع السيرفر بنفسك بس ده متعب و مضيعة للوقت عشان انت هتسيب المشروع ذات نفسه و تشتغل على انك تعمل framework و ف الاخر برضو هتفوتك تفاصيل و edge cases و مش هتوصل لاداء كويس 

ف الحل الافضل انك تستخدم meta framework جاهزة (و دي كلمه معناها framework بتبني فوق framework ) و من اشهر ال meta frameworks الموجودة ل react هما Next js  و remix و مؤخرا ظهر منافس واعد جديد مع انه لسه beta اسمه tanstack start

و دول كلهم ييحلو نفس المشكلة الي هي انك ترندر الكود على السيرفر باستخدام react و كل واحد بيحلها بطريقته و بيديك مميزات مختلفة 

و طبعا مش بس react الي عندها meta framework تقريبا كل framework ليها ال meta بتاعها زي nuxt ل vue و universal ل angular و svelte kit ل svelte 

ال ssr مفيد لو انت مهتم بال seo و عاوز الموقع بتاعك يبقى سريع و هو بيستخدم بيانات بتتغير بشكل سريع ف هو انسب اختيار لحجات زي السوشيال ميديا او ال e-commerce 
### ssg

و ده اختصار ل static site generation و ده فكرته اني عاوز اكتب كود framework زي react عشان الادوات الي هي بتديهيالي و سهولة الكتابة بيها و ال DX الممتاز 

(ال DX دي اختصار ل developer experience يعني انت مبسوط و انت بتكتب الكود و الدنيا تمام و الكود بيساعدك و الدنيا واضحة معاك ولا لا الي يعني تجربة المبرمج زي ما ال UX تجربة المستخدم)

بس ف نفس الوقت عاوز النتيجة تبقى static site شغال ب html css js زي ما كنا بنعمله 

بس في كمان حتة مهمة هنا هي كلمه generation يعني توليد يعني انا مش هعمل الصفحات بايدي امال هعمل ايه ؟

انا ف الاول بيكون عندي بيانات مرتبة structured عاوز اعرضها وليكن مثلا اخبار او مقالات او بيانات منتجات او خدمات او غيره المهم ان كلها ليها نفس الشكل و بتكون غالبا معمولة بحاجة زي json او الاشهر منه markdown 

ف بدل ما اعمل صفحة لكل عنصر عندي و اقعد اغير ف البيانات لا  انا هكتب هيكل للصفحات بتاعتي باستخدام ال framework و هحدد البيانات بتعتي هتروح فين وسط الهيكل ده و بعدين اقول لل framework ان الصفحة دي بياناتها هنا اهي

و لما اديها امر build هتروح تاخد كل عنصر من البيانات و تحطه ف الهيكل و تطلعلي صفحة html جاهزة ثم تاخد الي بعده و هكذا و هكذا

و فالاخر اقدر اخد الصفحات دي و ارفعها ف اي حتة و كل ما حد يجي عاوز صفحة منهم هتجيلة الصفحة المعمولة الجاهزة الموجودة من قبل كده

ف ده بيكون اسرع من ال spa عشان مش بستنى js تحمل و تعملي الصفحة و كمان اسرع من ال ssr عسان مش بستنى السيرفر يرندر الصفحة لا هي معمولة جاهزة انت بس بتاخدها تعرضها عندك

ف انت هنا بتاخد ال dx الممتاز من ال spa و ال seo الكويس من ال ssr و السرعة التي لا تقارن من الطريقة التقليدية 

بس زي اي حاجة له عيوب و عيوبه هنا انكلازم تعمل generation للصفحات من اول و جديد و ترفع الموقع تاني لو في حاجة ف البيانات اتغيرت سواء حذف او اضافة او تعديل و ده لان مفيش هنا حاجة تقوله اعمل صفحات جديدة بعد ما الموقع يترفع

على عكس ال ssr الي كل ما تطلب منه بيانات معينة يروح يشوفها ف api او داتابيز ف اقدر ازود و احذف براحتي

ف هو مش هيكون مناسب لحاجة بتتغير بسكل مستمر زي سوشيال ميديا مثلا لانه ساعتها هياخد شكل البيانات الموجودة و يعمل بيها صفحات html ثابته ف لو انا جيت فتحت الابلكيشن دلوقتي هيجيبلي بيانات معينة و لو جيت بكرة هيجيبلي نفس البيانات و هكذا لحد ما حد يحدث الصفحات و يرفع الموقع تاني 

و مينفعش طبعا اني كل ما حد يجي يرفع بوست جديد احدث الموقع و ارفعه لان ده هيبقى صعب و مكلف جدا و مش هيديك تجربة اداء كويسة للمستخدم 

لكنه مناسب جدا لاي حاجة static مش بتتغير كتير زي المدونات الشخصية مثلا الي بتنزل عليها مرة فالاسبوع او حاجة ف مش مشكلة اني احدث الموقع و ارفعه تاني مرة ف الاسبوع 

حجات تانية زي مدونات الشركات او الجامعات الي هي مش بتكون مفتوحة لعامة الناس لا اصحابها بس هما الي بيكتبو عليها و ليهم تحكم فيها 

كمان عندك مواقع ال docs و المواقع الشخصية و صفحات الماركتينج و استعراض الخدمات و غيرهم كتير

من اشهر ال frameworks الي اقدر اعمل بيهم ssg في عالم react هما gatsby بس دي كانت تريند و راحت عليها حاليا الاشهر هما Nextjs برضو لانها تقدر تطلع ssr و ssg و كمان framework اسمها Astro تقدر تكتب كود react جواها

## - مقارنة ما بين react وباقي ال frameworks

(حاسسها مش مهمة دلوقتي ممكن ننقلها لاخر الكورس)

## - ازاي نبدأ مشروع react ؟

عشان تبدأ مشروع react هنحتاج شوية حجات الاول 

هنحتاج Node و npm عشان ننزل ال packages اللازمة ل react و كمان عشان نقدر نشغل ال dev server (هنعرف ده ايه كمان شوية) ف لو مش عندك تقدر تنزل اخر نسخة من الموقع الرسمي بتاعهم

هنحتاج code editor عشان نكتب الكود و نشوف الفايلات ز نتعامل بشكل اسهل و اشهر حاجة دلوقتي هوا VScode (ممكن تستعمل اي حاجة حجات زي sublime او brackets او حتى لو عاوز cursor مثلا بس vscode كويس و بيأدي الغرض و مفيهوش AI و ده مهم فالاول بالنسبالي)

طبعا احنا ممكن نبتظي من صحيفة فارغة تماما و نحط ملفاتنا بنفسنا و نظبط كل حاجة براحتنا بس ليه نعمل كده و عندنا ادوات كتير بتسهل الموضوع و بتنجز وقت

في عندنا اكتر من طريقة كل واحدة ليها الاداة بتاعتها (الي هي ف الاخر امر بنكتبه و بندوس انتر ) و هي بتظبط كل حاجة لوحدها

زمان كنا بنستخدم اداة اسمها create react app كانت بتعملنا فايلات المشروع كله و بتظبط ال bundler (هنعرف يعني ايه bundler قدام شوية) و الي هو ف الحالة دي بيكون webpack 

بس الاداة دي كان فيها مشاكل كتير و صعب انك تخصصها براحتك و كانت بتستخدم webpack و ده مع كبر المشروع بيبطأ و هيخلي تجربتك سيئة و كمان الاداة قدمت و وقفو الدعم عنها و حتى التيم بتاع react نفسه بينصحك تبعد عنها

لكن لحسن الحظ ظهرت اداة شبهها اسمها create vite و دي بتعملك نفس الي بتعمله create react app بس بتربطلك ب bundler اجدد و اسرع و احسن اسمه vite و ده بقى ال standard دلوقتي و كل الناس بتستخدمه

و طبعا لو انت حابب تبدأ من meta framework تقدر تلاقي الامر بتاعها على الموقع الرسمي بتاعهم

عشان نبدأ المشروع هنفتح ال cmd ف المكان الي عاوزين نحط فيه المشروع و نحط الامر بتاعنا و ندوس انتر و في دقيقة هتلاقي المشروع بدأ و بيشرحلك كمان تستخدمه ازاي

ف نقدر نتبع الخطوات دي كده (متركزش قوي هنشرحهم قدام شوية) عشان نشغل المشروع و نشوفه ف البراوزر عندنا 

## تقسيمة مشروع react