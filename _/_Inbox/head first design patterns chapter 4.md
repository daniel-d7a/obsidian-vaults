[[Eraasoft]]

#project/hfdp

#video_script/hfdp

- بيتكلم عن ال factory pattern و ده pattern شايف ان انشاء ال objects المفروض ميكونش حاجة public
- المشكلة ف انشاء ال objects ان اوقات كتير ال object الي بحتاج اعمله بيعتمد على ححات كتير و conditions
- ف بتلاقيني محتاج اعمل if statements و كده عشان اختار ال object الصح
- ف طبعا لما يحصل اي تغيير ف ال requirements او نضيف class جديد هنحتاج نرجع لل condition تاني و نغير ف الكود
- و طبعا ساعتها الكود ده مش هيكون في مكان واحد لا ده هتلاقيه متبعتر ف كذا مكان ف المشروع
- ف ده بيخالف مبدأ ال Open Closed الي اتكلمنا عنه
- و عشان نحل حاجة زي كده محتاجين ن code to an interface يعني منعتمدش على ال classes ال concrete و ال new في الكود بتاعنا

- نقطة بسيطة بس عشان المعلومة دي لخبطتني انا كمان
- لما نيجي نتكلم عن الكود ف احنا بنتكلم عنه بشكل طبقات
- في طبقة بتطبق البزنس بتاع المشروع
- و في طبقة تحتها بتربط البزنس ده بالبرمجة
- احنا بنحاول انه مش كل مرة البزنس يتغير نغير طريقة الربط
- هو ده قصدنا ب التغيير و تقليل التغيير و هو دي الاماكن الي بنكود فيها ل interface و كده
- ف لما تلاقيني مجرد بشيل الكود احطه ف function او class انا مش بس بعمل كده لا انا كده كمان بنقله من طبقة البزنس ل طبقة البيانات عشان احميه من التغييرات في البزنس
- و كمان عشان ممكن اكتر من بزنس يستخدم نفس طرق الربط باكتر من شكل

- المثال الي معانا المرادي مصنع بيتزا
- ف الاول كنا بنعمل نوع واحد ف مكنش في مشكلة بنعمل object البيتزا و بعدها بنبدأ نجهزه
- بعد كده انواع البيتزا زادت ف بقى اختيار ال object بيتم ف condition لكن باقي ال functions زي مهي لان كل ببتزا عارفه خطوات التحضير بتاعتها 
- هنا بقى تبدأ تلاحظ المشكلة انه لو انواع البيتزا زادت او اتغيرت هضطر اني اجي و اعدل ف الكود ده

- حاجة زي كده حلها بسيط
- هنفصل الكود المتغير عن الكود الثابت
- المتغير هنا هو اختيار نوع البيتزا ف ممكن اخده و اطلعه برا ف function او class لوحده
- وبستخدمه ف اي مكان بحتاج اعمل بيتزا
- و بالتالي البزنس كود مش محتاج يعرف طريقة إنشاء البيتزا
- و هنا احنا مش مجرد بنحطه ف كلاي او فنكشن تانية لا احنا بنعزله ف مكان ممكن اعيد استخدامه ف اكتر من مكان ف الكود بتاعي
- زي مثلا لو عملت كود ل محل بيع بيتزا
- و الطريقة دي بنسميها ال simple factory و دي تبسيط لفكرة ال factory pattern 

- نيجي لمشكلة تانية و هي لو انا عاوز اعمل انواع اكتر من البيتزا و كل نوع تحتيه اطعم مختلفة 
- زي اني عندي مثلا بيتزا ايطالي و بيتزا مصري و فطير و كل واحد من دول في منه بالفراخ و اللحمة و الخضار
- طبعا انت ممكن تعمل ده بال simple factory بتاعنا
- بس هتلاقي عندك مشكلة هي ان بعد ما تعمل object البيتزا محتاج كمان تعمل البيتزا نفسها و تخبزها و تقطعها و غيره و ده ممكن تحتاجه ف اكتر من مكان
- غير كده لو زودت انواع تانية ف الانواع الكبيرة زي بيتزا امريكاني هتلاقيك محتاج تزود حجات كتير و الكود بتاعك هيكبر و يبقى صعب تعديله و كمان لو جيت تعدل او تحذف

- حل المشكلة دي برضو سهل 
- افصل الانواع عن بعض كل واحد ف class و وحد طريقة صنع البيتزا
- هنعمل ده باستخدام abstract class بيحدد طريقة صنع البيتزا و لكن بيسيب نوع البيتزا مش بيحددها 
- و بيسيبها لل child classes عن طريق انه بيخليها abstract هي كمان
- كده كل child class يجي هيحتاج يحط طريقة يعمل بيها بيتزا بانواع مختلفة و بشكل تلقائي الطريقة الي هو بيحطها دي هيتم استخدامها لعمل البيتزا لما ينادي order pizza
- لانها بتنادي ال create pizza و دي abstract عندها ٤ لازم تناديها من ال child class و على حسب ال child class هيطلع لك نوع بيتزا مختلف
- و كده انا فصلت الانواع عن بعض و اقدر ازود انواع جديدة بسهولة
- و كمان شلت الكود المسؤول عن عمل البيتزا و حطيته ف مكان واحد
- و هذا عزيزي المشاهد هو ال factory method pattern 