[[Eraasoft]]

#project/hfdp

#video_script/hfdp

- بيتكلم عن ال factory pattern و ده pattern شايف ان انشاء ال objects المفروض ميكونش حاجة public
- المشكلة ف انشاء ال objects ان اوقات كتير ال object الي بحتاج اعمله بيعتمد على حجات كتير و conditions
- ف بتلاقيني محتاج اعمل if statements و كده عشان اختار ال object الصح
- ف طبعا لما يحصل اي تغيير ف ال requirements او نضيف class جديد هنحتاج نرجع لل condition تاني و نغير ف الكود
- ف ده بيخالف مبدأ ال Open Closed الي اتكلمنا عنه
- و كمان ساعتها الكود ده مش هيكون في مكان واحد لا ده هتلاقيه متبعتر ف كذا مكان ف المشروع
- و عشان نحل حاجة زي كده محتاجين ن code to an interface يعني منعتمدش على ال classes ال concrete و ال new في الكود بتاعنا

- نقطة بسيطة بس عشان المعلومة دي لخبطتني انا كمان
- لما نيجي نتكلم عن الكود ف احنا بنتكلم عنه بشكل طبقات
- في طبقة بتطبق البزنس بتاع المشروع
- و في طبقة تحتها بتربط البزنس ده بالبرمجة
- احنا بنحاول انه مش كل مرة البزنس يتغير نغير طريقة الربط
- هو ده قصدنا ب التغيير و تقليل التغيير و هو دي الاماكن الي بنكود فيها ل interface و كده
- ف لما تلاقيني مجرد بشيل الكود احطه ف function او class انا مش بس بعمل كده لا انا كده كمان بنقله من طبقة البزنس ل طبقة البيانات عشان احميه من التغييرات في البزنس
- و كمان عشان ممكن اكتر من بزنس يستخدم نفس طرق الربط باكتر من شكل

- المثال الي معانا المرادي مصنع بيتزا
- ف الاول كنا بنعمل نوع واحد ف مكنش في مشكلة بنعمل object البيتزا و بعدها بنبدأ نجهزه
- بعد كده انواع البيتزا زادت ف بقى اختيار ال object بيتم ف condition لكن باقي ال functions زي مهي لان كل ببتزا عارفه خطوات التحضير بتاعتها 
- هنا بقى تبدأ تلاحظ المشكلة انه لو انواع البيتزا زادت او اتغيرت هضطر اني اجي و اعدل ف الكود ده

- حاجة زي كده حلها بسيط
- هنفصل الكود المتغير عن الكود الثابت
- المتغير هنا هو اختيار نوع البيتزا ف ممكن اخده و اطلعه برا ف function او class لوحده
- وبستخدمه ف اي مكان بحتاج اعمل بيتزا
- و بالتالي البزنس كود مش محتاج يعرف طريقة إنشاء البيتزا
- و هنا احنا مش مجرد بنحطه ف كلاس او فنكشن تانية لا احنا بنعزله ف مكان ممكن اعيد استخدامه ف اكتر من مكان ف الكود بتاعي
- زي مثلا لو عملت كود ل محل بيع بيتزا
- و الطريقة دي بنسميها ال simple factory و دي تبسيط لفكرة ال factory pattern 

- جينا بعد كده و قررنا اننا نكبر مطعم البيتزا و نفتح ف اكتر من مكان
- هتبدأ تظهر عندنا مشكلة تانية الي هي اني عاوز اعمل انواع كتير من البيتزا باطعم مختلفة
- زي اني عندي مثلا بيتزا ايطالي و بيتزا مصري و كل واحد من دول في منه بالفراخ و اللحمة و الخضار
- طبعا انت ممكن تعمل ده بال simple factory بتاعنا
- بس هتلاقي عندك مشكلة هي ان بعد ما تعمل object البيتزا محتاج كمان تعمل البيتزا نفسها و تخبزها و تقطعها و غيره 
- و ده ممكن يختلف من شكل بيتزا للتاني و كمان ممكن تحتاجه ف اكتر من مكان
- غير كده لو زودت انواع تانية ف الانواع الكبيرة زي الفطير مثلا او لو جيت تعدل او تحذف هتلاقيك محتاج تزود حجات كتير و الكود بتاعك هيكبر و يبقى صعب تعديله 

- حل المشكلة دي برضو سهل 
- افصل الانواع عن بعض كل واحد ف class و وحد طريقة صنع البيتزا
- هنعمل ده باستخدام abstract class بيحدد طريقة صنع البيتزا و لكن بيسيب نوع البيتزا مش بيحددها 
- و بيسيبها لل child classes عن طريق انه بيخليها abstract هي كمان
- كده كل child class يجي هيحتاج يحط طريقة يعمل بيها بيتزا بانواع مختلفة و بشكل تلقائي الطريقة الي هو بيحطها دي هيتم استخدامها لعمل البيتزا لما ينادي order pizza
- لانها بتنادي ال create pizza و دي abstract ف لازم تناديها من ال child class و على حسب ال child class هيطلع لك نوع بيتزا مختلف

- ناقصنا هنا حاجة واحدة بس هي اني اعمل كلاسات البيتزا
- و انواع البيتزا كلهم ليهم نفس الشكل بس باختلاف المكونات و احيانا كمان طريقة التحضير (زي اني مثلا ممكن عندي بيتزا مربعة) ف ممكن يكون عندنا interface بتوحدهم و بعد كده class مخصص لكل نوع

- و كده انا فصلت الانواع عن بعض و اقدر ازود انواع جديدة بسهولة
- و كمان شلت الكود المسؤول عن عمل البيتزا و حطيته ف مكان واحد
- و هذا عزيزي المشاهد هو ال factory method pattern 
- و ده بيتكون من creator classes الي هم في حالتنا دي ال محلات البيتزا
- و ال product classes الي هما البيتزا بانواعها
- و كل creator class بيكون مسؤول عن اكتر من product class
- و تعريفه الرسمي انه pattern بيحدد طريقة انشاء ال object بس مش بيحدد النوع او ال class الي هيطلع و بيسيبه لل child classes تحدد هي على حسب انهي creator class مستخدم
- و ال abstract class بيشتغل من غير ما يعرف مين ال class الي هيطلع
- و ال function الي بتحتاج تعملها ف ال creator classes دي الي بنسميها ال factory method الي من اسمها جه اسم ال pattern 

- ده له فوايد كتير اهمها انك بتفصل انشاء ال object عن استخدامه عشان حتى لو اتغيرت طريقة انشاءه الحجات الي بتستخدمه مش محتاجه تتغير و ده كده يبقى loose coupling
- ال pattern ده كمان له اشكال كتير منها انك ممكن متخليش ال factory method تكون abstract بمعنى انك ممكن تديها default implementation 
- كمان انا عندي creator classes بتعمل اكتر من product و دي اسمها parameterized factory method بس دي مش شرط و ممكن يبقى كل class بيعمل product واحد بس عادي