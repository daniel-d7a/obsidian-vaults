title: ุงูู ูู ุงู useRef hook ู ุงุฒุงู ุจูุณุชุฎุฏูู ุ

pubDate: 2024-12-29

intro: ุชุนุงูู ูุชุนุฑู ุนูู ุงู useRef hook ู ูุดูู ุทุฑู ุงุณุชุฎุฏุงู ููู ุนูุฑู ูุง ููุฑุช ูููุง ูุจู ูุฏู.

tags: ["react", "hooks"]

author: eyad

image: "@/assets/blogs/the story of ts.jpg"

references: ["https://react.dev/reference/react/useRef", ""]


# ุงูู ูู ุงู useRef hook ู ุงุฒุงู ุจูุณุชุฎุฏูู ุ

ุงูุณูุงู ุนูููู ุงุฒููู ุนุงูููู ุงูู ุ ูู ููุงูุฉ ุงูููุงุฑุฏุฉ ุฌุงููู ูุชุนุฑู ุนูู ุงู use ref hook ุจุดููุฉ ุชูุตูู. 

ุงู use ref hook ูู react hook ุจูุฑุฌุน ูููุฉ ุจุชุชุญูุธ ูุง ุจูู ุงู renders ุจุณ ูุง ุงูุซุฑ ููุง ุงูู. 
  
ุฒูู ุจุงูุธุจุท ุฒู ุงู use state ุจู ููุงู ูููู ูููู ุงูู ูู ุงุตูุง ุนุจุงุฑุฉ ุนู use state ูุน ุดููุฉ ูุฑููุงุช ุตุบูุฑุฉ ู ุฒู ูุง ุงุญูุง ุนุงุฑููู ุงู use state ุจูุฑุฌุนูู ูููุฉ ุจุชุชุญูุธ ูุง ุจูู ุงู renders ู setter function ุนุดุงู ุงูุฏุฑ ุงุบูุฑ ุจููุง ุงููููุฉ ุฏู ู ุงุนูู rerender ูู ui. 
  
ุงูุช ูููู ุชุชุฎูู ุงู use ref ูู ุฌูู ูุฃูู ุจููุงุฏู ุงู use state ู ุจูุงุฎุฏ ุงููููุฉ ุงูู ุงูุช ุจุชุฏููุงูู ูุญุทูุง ูููุฉ default ุนุจุงุฑุฉ ุนู object ุฌูุงู property ูุงุญุฏุฉ ููุท ุงุณููุง current ูููุชูุง ุจุงููููุฉ ุงูู ุงูุช ุงุฏูุชูุง ูู use ref hook ู ุจุนุฏ ูุฏู ูุฑุฌุนูู ุงู value ุงูู ุฑุฌุนุช ูู ุงู use state ูู ุบูุฑ ูุง ูุฏูู ุงู setter function, ุญุงุฌุฉ ุฒู ูุฏู:
```ts 
function useRef(initialValue){
	const [ref] = useState({ current: initialValue })
	return ref
}

// ...

const ref = useRef("eyad") // ref = {current: "eyad"}
```

ููุง ูููู ูุฌู ู ุจุงูู ุงูุชุฑ ูู ุณุคุงู ุฒู ูุซูุง: -  
- ููู ูุด ุจูุฏููู setter function ุ  
- ููุง ููุฏูููุด setter function ูุบูุฑ ุงููููุฉ ุงุฒุงู ุ  
  
ุฏู ูุฑู ูู ูุฑููุงุช ุงู ref ุนู ุงู state ุงู ุงู state ุจุชุชุบูุฑ ุจ ุงู setter function ุนุดุงู ุชุนูู rerender ูู UI ุงููุง ุงู ref ููุฏุฑ ูุบูุฑู ูู ุงู variable ุนุงุฏู ู ุจุงูุชุงูู ูุด ููุนูู rerender ูู component ู ูุด ูุญุชุงุฌ setter function.
  
ุงู refs ูุนูููุฉ ุนุดุงู ุงุญุท ูููุง ุจูุงูุงุช ุงูุง ูุญุชุงุฌ ุงุญุงูุธ ุนูููุง ูุง ุจูู ุงู rerenders ุจุณ ูุด ูุญุชุงุฌูุง ู ุงู ui ู ุจุงูุชุงูู ูุด ุจุญุชุงุฌ ุงุนูู rerender ููุง ุงุบูุฑูุง.

ุทุจ ููุง ูู ุจูุญูุธ data ุฒู ุงู use state ููู ุนููููู hook ููุญุฏู ุทุจ ูุง ุงูุง ุงุณุชุฎุฏู use state ุจููุณู ู ุฎูุงุต ุ  
  
ุฏู ูุงู ุญูุธ ุงูุฏุงุชุง ูู ูุงุญุฏ ูู ุงุณุชุฎุฏุงูุงุช ุงู refs ู ูููู ุงุณุชุฎุฏุงู ุชุงูู ููู ุฌุฏุง ูู ุงููู ุจูุฎููู ุชูุฏุฑ ุชุชุนุงูู ูุน ุงู dom ุฒู ูุง ููุดุฑุญ ุชุญุช.

## ุงูุงุณุชุฎุฏูุงุช

### ุญูุธ ุงู data ุจูู ุงู rerenders

ูููุง ุงุณุชุฎุฏุงููู ุงุณุงุณููู ุงูููู ุญูุธ ุงู data ุจูู ุงู renders ุจุณ ูุด ุงู data ู ุฎูุงุต ูุฏู  
ูู ุงู data ุฏู ูููุง ุนูุงูุฉ ุจุงู UI ุฒู ูุซูุง ุงุณู ุงููุณุชุฎุฏู ุงู ุงู todos ุงู ุงู ุญุงุฌุฉ ูุชุนููุฉ ุจุงู UI ูุงุฒู ุชุชุญูุธ ู state  ุฏู ูุงููุง reactive data ูุนูู ุชูุงุนููู ุจุชุชุบูุฑ ู ููุง ุชุชุบูุฑ ูุงุฒู ุงูุชุบูุฑ ููุนูุณ ุนูู ุงู UI ุงููุง ุงู ref ุจูุณุชุฎุฏู ุนุดุงู ูุญูุธ ููู ุงู data ุบูุฑ ูุชุนููุฉ ุจุงู UI ุฒู ูุซูุง ุงู interval id ุงู ุงู timeout id: -

```ts showLineNumbers {11-14}
import { useState, useRef } from "react";

export default function App() {
  const [isRunning, setlsRunning] = useState(false);
  const [time, setTime] = useState(0);
  const intervalRef = useRef(null);

  function startStopwatch() {
    if (!isRunning) {
      setlsRunning(true);
      intervalRef.current = setInterval(
        () => setTime((prevTime) => prevTime + 1),
        1000,
      );
    }
  }

  function stopStopwatch() {
    if (isRunning) {
      setlsRunning(false);
      clearInterval(intervalRef.current);
    }
  }

  return (
    <div>
      <div>{time}</div>
      <button onClick={startStopwatch}>Start</button>
      <button onClick={stopStopwatch}>Stop</button>
    </div>
  );
}

```

### ุงูุชุญูู ูู ุงู Dom nodes ุจุดูู ูุจุงุดุฑ

ู ุญุงุฌุฉ ููุงู ูููุฉ ุฌุฏุง ู ุงู refs ุงูู ุจูุณุงุนุฏู ุชุชุญูู ูู ุงู DOM nodes ุนู ุทุฑูู ุงู DOM methods ุฒู query selector ุงู add event listener ุงู ุบูุฑูู.  
ุฏู ุนู ุทุฑูู ุงูู ุชุนูู ref ู ุชุฏูู ูุงู DOM node ู ุงู ref property ุจุชุงุนุชูุง ู react ุชููุงุฆูุง ูุชุฎูู ุงู current ุจุชุงุน ุงู ref ุนุจุงุฑุฉ ุนู ุงู DOM node ุฏู: -
``` ts showLineNumbers {19}
import { useRef } from "react";

export default function App() {
ย const buttonRef = useRef(null);

ย return (
ย ย <>
ย ย ย <button
ย ย ย ย ref={buttonRef}
ย ย ย ย onClick={() => {
ย ย ย ย ย console.log("button clicked");
ย ย ย ย }}
ย ย ย >
ย ย ย ย click me!
ย ย ย </button>
ย ย ย 
ย ย ย <button
ย ย ย ย onClick={() => {
ย ย ย ย ย buttonRef.current?.click();
ย ย ย ย }}
ย ย ย >
ย ย ย ย trigger button click
ย ย ย </button>
ย ย </>
ย );
}
```

  
ุจุณ ูุงุฒู ุชุฎูู ุจุงูู ุงู ุนูููู ุฑุจุท ุงู DOM node ุจุงู ref ุจุชุญุตู ุจุนุฏ ุงู rendering ู ููุถู ุชุณุชุฎุฏู ุงู DOM node ุฌูู event handler ุฒู ุงู on click ูุซูุง ุงู ุฌูู use effect ุนุดุงู ุชุถูู ุงู ุงู node ูุด undefined ุงู ุชุณุชุนูู ุงู safe chaining operator (.?) ุฒู ุงููุซุงู ุงูู ููู.

### ุงูุชุญูู ูู ุนุฏุฏ ูุชุบูุฑ ูู ุงู Dom nodes

ูู ุจุนุถ ุงูุงุญูุงู ุจูุจูู ูุญุชุงุฌูู ref ูุงูุชุฑ ูู ุนูุตุฑ ู ูู ุงูุช ูุนุงู ุนูุตุฑ ุงู ุงุชููู ุงู ุนุฏุฏ ูููู ู ุซุงุจุช ู ุงูุช ูููู ุชุนูู refs ุจุนุฏุฏูู ู ุฏู ุนุงุฏู ุฌุฏุง ุจุณ ูู ุนุฏุฏูู ูุจูุฑ ุงู ุนุฏุฏูู ูููู ูููู ุจูุชุบูุฑ ู ููุจูู ุตุนุจ ุงูู ุชุนูู refs ุจุนุฏุฏูู ู ุชุนูููู assign ุตุญ.  

ูููู ุชุชุตุฑู ุงูู ุชุนูู ref ุนุงู parent ู ุชุณุชุฎุฏู dom methods ุฒู ุงู query selector ูุซูุง ุนุดุงู ุชุฌูุจ ุงูุนูุงุตุฑ ุงูู ุฌูุงู ุจุณ ุญุงุฌุฉ ุฒู ูุฏู ูุด ูููุณุฉ ูุงูุชุฑ ูู ุณุจุจ 
ุงุจุณุทูู ุงู ุดูู ู ุชุฑุชูุจ ุงูุนูุงุตุฑ ูููู ูุชุบูุฑ ูุน ุงูููุช ู ุจุงูุชุงูู ูุชุญุชุงุฌ ุชุนุฏู ู ุงู query ุจุชุงุนุชู  
  
ูู ุทุฑููุฉ ุชุฎููู ุชุชุนุงูู ูุน ุนุฏุฏ ูุจูุฑ ู ูุชุบูุฑ ูู ุงูุนูุงุตุฑ ุจ ref ูุงุญุฏ ุจุณ ู ูุชูุฑ ูู ุงููุงุณ ูุชุนุฑููุงุด ูุน ุงููุง ุทุฑููุฉ ูููุฉ ุฌุฏุง.  
  
ุทุฑููุฉ ุงุณุชุฎุฏุงู ุงู ref ูุน ุงู dom elements ู ุงูุนุงุฏู ุงูู ุจุชุนุฑู ref ู ุจุชุฏูู ูู ref property ุจุชุงุนู ุงู element ุนุดุงู react ุชุญุท ุงู dom node ู ุงู current ุจุชุงุน ุงู ref ุฒู ูุฏู: -
```ts 

import { useRef } from "react";

export default function App() {
ย const buttonRef = useRef(null);

ย return (
	ย <button ref={buttonRef}> click me! </button>
ย );
}
```
  
ุงุญูุง ุจูู ูุด ููุนูู ูุฏู, ุงุญูุง ุจูู ุจุณุงุทุฉ ููุนูู ref ู ููุฏููู ูููุฉ ูุจุฏุฆูุฉ ุจ ุญุงุฌุฉ ุชูุฏุฑ ุชุดูู ุงูุชุฑ ูู ุนูุตุฑ ูููู array ู ูููู set ุงู map ู ุงูุงูุซูุฉ ุงูู ุชุญุช ูุฑุฉ ุงุณุชุฎุฏููุง array ู ูุฑุฉ map.

ุจุนุฏูู ุจุฏู ูุง ูุฏูู ูู ref property ุจุชุงุนู ุงูุนูุงุตุฑ ุงูู ุงูุง ุนุงูุฒ ุงุชุญูู ูููุง ูุฏูููุง callback function ุจุชุงุฎุฏ parameter ูุงุญุฏ ุนุจุงุฑุฉ ุนู ุงู dom node ุงูู ุงูุง ูุงูู ุนูููุง ู ุฏู ูููู ุชููู ูููุชูุง ุจ ุงู dom node ูุนูุง ุงู ุจ null ูู ุงูุนูุตุฑ ุงุชุดุงู ุงู ุงูุฌุฒุก ุฏู ูู ุงู dom ุงุชุบูุฑ.
  
ููุนูู check ุจุณูุท ุนูู ุงู node ุงููุง ูู ููุฌูุฏุฉ ูุงุฎุฏูุง ูุนุงูุง ุงู ูู ูููุชูุง ุจ null ูุดูููุง  ู ูุฏู ุจูู ุจุณุงุทุฉ ุจูู ูุนุงู ref ุงู current ุจุชุงุนู ุดุงูู ุงู ุนุฏุฏ ูู ุงูdom nodes ุงูุช ุชุญุชุงุฌู ุญุชู ูู ุงูุนุฏุฏ ุฏู ุฒุงุฏ ุงู ููุต ุฎูุงู ุงู run time.
  
ุทุจ ุงูู ุชุทุจููุงุช ุนูู ุญุงุฌุฉ ุฒู ูุฏู ุ  

ูููู ูููู ูุนุงู ุงูุชุฑ ูู ุนูุตุฑ ูุญุชุงุฌ ุชุบูุฑ ู ุงู style ุจุชุงุนูู ุงู ุชุณุชุฎุฏู ุนูููู dom methods ุฒู focus ุงู click ูู ุฎูุงู ุนูุงุตุฑ ุชุงููุฉ ู ููุงู ุงูุนูุงุตุฑ ุฏู ูููู ุนุฏุฏูุง ูููู ูุชุบูุฑ ู ุญุงุฌุฉ ุฒู ุฏู ูููู ุชุดูููุง ู [ุงููุซุงู ุฏู](https://codesandbox.io/p/sandbox/use-ref-callback-example-shmvxh?file=%2Fsrc%2Findex.js)   
  
ููุง ุนูุฏูุง state ุนุจุงุฑุฉ ุนู array ูู ุงูุงุฑูุงู ู ูุตุงุฏูู array ูู ุงูุฒุฑุงูุฑ ูู ุฒุฑุงุฑ ุจูุฃุซุฑ ุนูู ุฑูู ูุนูู ู ุงูุฒุฑุงูุฑ ู ุงูุงุฑูุงู ุจุนูุฏ ุนู ุจุนุถ ู ููุงู ุงูุงุฑูุงู ูููู ุชูู ุงู ุชุฒูุฏ ุฎูุงู ุงู run time, ู ุนุดุงู ููุฏุฑ ูุบูุฑ ุงูุงุฑูุงู ุงุณุชุนูููุง ref ู ุนูููุง callback function ุนูู ูู p element ุดุงูู ุฑูู.
  
ูููู ููุงู ุชุนูู ุจููุง image gallery ููู ุฒุฑุงูุฑ ุงู thumbnails ุตุบูุฑุฉ ุจุชุฎููู ุช scroll ู ุงูุตูุฑ ููุง ุชุฏูุณ ุนูููุง ุฒู [ุงููุซุงู ุฏู](https://codesandbox.io/p/sandbox/use-ref-callback-example-2-8kqsng)

ู ุงููุซุงู ุฏู ูุณุชุฎุฏููู map ุนุดุงู ุชุดูู ุงู dom nodes ุงูู ูููุง ุงูุตูุฑ ุจุญูุซ ููุง ุงุฏูุณ ุนูู ุงู thumbnail ุจุชุงุนุชูู ุงุนูู scroll ุนูููุง. ู ุงููุซุงู ุฏู ุนุฏุฏ ุงูุตูุฑ ุซุงุจุช ุจุณ ุฏู ุจุฑุถู ููุดุชุบู ูู ูุงู ุนุฏุฏ ุงูุตูุฑ ูุชุบูุฑ ุฒู ุงูู ูููู ุฑุงุฌุน ูู api ุงู ุงู user ูู ุงูู ุจูุฏุฎูู

## ุงูุฎุงุชูุฉ

ุงุฎุฑ ูุนูููุฉ ูุฎุชู ุจููุง ุงู post ุฏู ูู ุงู ุงู use ref ูุนุชุจุฑ escape hatch ูุนูู ููุฌูุฏ ุนุดุงู ูุทูุน ุจุฑุง ุณูุณุชู react ุฒู ุงูู ุชุชุญูู ุจุงู DOM ุจุดูู ูุจุงุดุฑ ุงู ุชุชุนุงูู ูุน library ูุด ููุชูุจุฉ ู react ููุงุฒู ูุจู ูุง ุชุณุชุฎุฏู ref ุชุชุฃูุฏ ุงูู ูุญุชุงุฌู ุงูุงูู ู ุจุนุฏูุง ุชุณุชุฎุฏูู ุจุญุฐุฑ ูุด ุนูุงู ุนูู ุจุทุงู ูุงูู ุบุงูุจุง ููุคุฏู ููุชุงูุฌ ุนูุณ ูุง ุงูุช ูุชููุน.

ูู ุนุฌุจู ุงูููุงู ูุชูุณุงุด ุชูุดุฑู ูุน ุงุตุญุงุจู ู ุนูู ููุงูุน ุงูุชูุงุตู ุงูุงุฌุชูุงุนู ู ุงูู ุญุงุฌุฉ ูุชูุณุงุด ุชุจุต ุนุงููุตุงุฏุฑ ุชุญุช ๐๐ผ
